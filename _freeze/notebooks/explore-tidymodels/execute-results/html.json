{
  "hash": "8609105abd7e6639a713c1e121f921a0",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Exploration using Tidymodels\"\nformat: html\n---\nLoad the `tidymodels` library along with other useful ones:\n\n\n::: {.cell}\n\n```{.r .cell-code .hidden}\n#| warning: false\n\nlibrary(tidymodels)\n```\n\n::: {.cell-output .cell-output-stderr .hidden}\n\n```\n── Attaching packages ────────────────────────────────────── tidymodels 1.3.0 ──\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr .hidden}\n\n```\n✔ broom        1.0.8     ✔ recipes      1.3.0\n✔ dials        1.4.0     ✔ rsample      1.3.0\n✔ dplyr        1.1.4     ✔ tibble       3.2.1\n✔ ggplot2      3.5.2     ✔ tidyr        1.3.1\n✔ infer        1.0.8     ✔ tune         1.3.0\n✔ modeldata    1.4.0     ✔ workflows    1.2.0\n✔ parsnip      1.3.1     ✔ workflowsets 1.1.0\n✔ purrr        1.0.4     ✔ yardstick    1.3.2\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr .hidden}\n\n```\n── Conflicts ───────────────────────────────────────── tidymodels_conflicts() ──\n✖ purrr::discard() masks scales::discard()\n✖ dplyr::filter()  masks stats::filter()\n✖ dplyr::lag()     masks stats::lag()\n✖ recipes::step()  masks stats::step()\n```\n\n\n:::\n\n```{.r .cell-code .hidden}\n#| warning: false\n\nlibrary(readr)\n```\n\n::: {.cell-output .cell-output-stderr .hidden}\n\n```\n\nAttaching package: 'readr'\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr .hidden}\n\n```\nThe following object is masked from 'package:yardstick':\n\n    spec\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr .hidden}\n\n```\nThe following object is masked from 'package:scales':\n\n    col_factor\n```\n\n\n:::\n:::\n\n\nLoad the full dataset from the Surging for Science project, also clean the variables names so they use `snake_case`:\n\n\n::: {.cell}\n\n```{.r .cell-code .hidden}\n#| message: false\n\nplastics <- read_csv(\"data/surfingforscience_240325.csv\") |>\n  janitor::clean_names()\n```\n\n::: {.cell-output .cell-output-stderr .hidden}\n\n```\nRows: 113404 Columns: 75\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr (10): ColorNature, Color_Name, Color_Category, Group, RF_Group, Cruise_N...\ndbl (63): Area, Mean, StdDev, Mode, Min, Max, X, Y, XM, YM, Perim., BX, BY, ...\nlgl  (2): RF_use, Modified\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n```\n\n\n:::\n:::\n\n\nThe aim of this notebook is to evaluate performance of different models following the [tidymodels](https://www.tidymodels.org/start/) workflow. To evaluate performance we need plastics that have been evaluated manually so we can compare the trained human observer with the AI. A *good* model is the one that gets us very similar results to the trained human.\n\nSubset the data to get all plastics evaluated by a human observer.\n\n\n::: {.cell}\n\n```{.r .cell-code .hidden}\nplastics_manual <- plastics |> filter(rf_use == FALSE)\n```\n:::\n\n\nOverall, the model currently in use had a 58.9% success rate.\n\n\n::: {.cell}\n\n```{.r .cell-code .hidden}\nplastics_manual |> count(rf_success = group == rf_group) |> \n  mutate(prop = n/sum(n))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 2 × 3\n  rf_success     n  prop\n  <lgl>      <int> <dbl>\n1 FALSE      23656 0.411\n2 TRUE       33857 0.589\n```\n\n\n:::\n:::\n\n\nBefore fitting new models, data splitting is done to avoid misleading performance results due to overfitting. The training dataset is intended to have plastics of all types in similar proportion, this is achieved by setting the argument `strata = group`.\n\n\n::: {.cell}\n\n```{.r .cell-code .hidden}\nplastics_split <- plastics_manual |> initial_split(prop = 3/4, strata = group)\n```\n:::\n\n\n\n\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}